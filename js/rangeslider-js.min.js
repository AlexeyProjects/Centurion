
class Slider {
  constructor (rangeElement, valueElement, options) {
    this.rangeElement = rangeElement
    this.valueElement = valueElement
    this.options = options

    // Attach a listener to "change" event
    this.rangeElement.addEventListener('input', this.updateSlider.bind(this))
  }

  // Initialize the slider
  init() {
    this.rangeElement.setAttribute('min', this.options.min)
    this.rangeElement.setAttribute('max', this.options.max)
    this.rangeElement.value = this.options.cur

    this.updateSlider()
  }

  // Format the money
  asMoney(value) {
    return  `${parseFloat(value)} â‚½`
      .toLocaleString('en-US', { maximumFractionDigits: 2 })
  }

  generateBackground(rangeElement) {   
    if (this.rangeElement.value === this.options.min) {
      return
    }

    let percentage =  (this.rangeElement.value - this.options.min) / (this.options.max - this.options.min) * 100
    return 'background: linear-gradient(to right, #0227AB ' + percentage + '%, #d3edff ' + percentage + '%, #dee1e2 100%)'
  }

  updateSlider (newValue) {
    this.valueElement.innerHTML = this.asMoney(this.rangeElement.value)
    this.rangeElement.style = this.generateBackground(this.rangeElement.value)
  }
}

let rangeElement = document.querySelector('.dolgRange')
let valueElement = document.querySelector('.range__value.dolg span') 

let rangeDohod = document.querySelector('.dohodRange')
let valueDohod = document.querySelector('.range__value.dohod span') 

let dolgOptions = {
  min: 30000,
  max: 5000000,
  cur: 37500
}


let dohodOptions = {
	min: 3000,
  	max: 100000,
  	cur: 10000
}

if (rangeElement) {
  let slider = new Slider(rangeElement, valueElement, dolgOptions)

  slider.init()
}
console.log(dohodOptions)
if (rangeDohod) {
	console.log(dohodOptions)
  let sliderDohod = new Slider(rangeDohod, valueDohod, dohodOptions)

  sliderDohod.init()
}